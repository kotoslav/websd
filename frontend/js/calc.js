"use strict";class Calculator{#price=0;priceDisplay=document.querySelector("div.calculator__button");orderButton=document.querySelector("button.calculator__button");constructor(){this.form=document.querySelector(".calculator__form"),this.request={"Цена":0},this.form.querySelectorAll(".question__input").forEach(e=>{e.addEventListener("change",this.calcAll.bind(this))}),this.orderButton.addEventListener("click",this.callOrder.bind(this)),this.price=0}get price(){return this.#price}set price(e){this.#price=e,this.request["Цена"]=e,this.priceDisplay.textContent="от "+new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",maximumFractionDigits:0}).format(this.price)}calcAll(){let e=0;var t=Array.from(this.form.querySelector("fieldset").querySelectorAll("input")).find(e=>e.checked);t&&(e=Number(this.form.querySelector("#q3-a1").checked?t.dataset.without:t.dataset.design)),e+=Array.from(document.querySelectorAll('.calculator-question[data-include="1"]')).reduce((e,t)=>e+Array.from(t.querySelectorAll("input")).reduce((e,t)=>t.checked?Number(t.value)+e:e,0),0),this.price=e}callOrder(){document.querySelectorAll(".calculator-question").forEach(e=>{var t=Array.from(e.querySelectorAll(".question__input")).reduce((e,t)=>(t.checked&&e.push(t.parentElement.textContent.trim()),e),[]),e=e.querySelector(".calculator__title").textContent;1==t.length?this.request[e]=t[0]:0==t.length?this.request[e]=null:this.request[e]=t}),document.dispatchEvent(new CustomEvent("modalopen")),document.dispatchEvent(new CustomEvent("callorder",{detail:this.request}))}}export{Calculator};